@page
@model IndexModel
@using System.Text.Json

<div class="container mt-5">
    <h2>Check ANAF Taxpayer</h2>

    <form method="post" style="max-width: 480px; margin: 40px auto; background: #f9f9f9; padding: 32px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1);">
    <div style="margin-bottom: 20px;">
        <label for="numericValue" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 14px;">
            Enter the Fiscal Identification Code (CIF)
        </label>
        <input type="number" asp-for="NumericValue" required
            style="width: 100%; padding: 10px 14px; border: 1px solid #ccc; border-radius: 8px; font-size: 15px; box-sizing: border-box; outline: none; transition: border 0.2s;"
            onfocus="this.style.borderColor='#4f46e5'" onblur="this.style.borderColor='#ccc'" />
    </div>
	<button type="submit"
        style="width: 100%; padding: 11px; background-color: #4f46e5; color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer;"
        onmouseover="this.style.backgroundColor='#4338ca'" onmouseout="this.style.backgroundColor='#4f46e5'">
        Fetch Data
		</button>
	</form>
    
    @if (Model.FoundData != null && Model.FoundData.Any())
    {
        <div class="mt-4">
            <h4>Found @Model.FoundData.Count item(s)</h4>
            
            @foreach (var item in Model.FoundData)
            {
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                @foreach (var property in item.EnumerateObject())
                                {
                                    <tr>
                                        <td class="text-nowrap"><strong>@property.Name:</strong></td>
                                        <td class="text-break">@property.Value</td>
                                    </tr>
                                }
                            </table>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else if (Model.FoundData != null)
    {
        <div class="alert alert-info mt-4">
            No items found
        </div>
    }

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger mt-4">
            @Model.ErrorMessage
        </div>
    }
</div>

<style>
    .text-break {
        word-wrap: break-word;
        word-break: break-word;
        max-width: 600px;
    }
    
    .table-responsive {
        overflow-x: auto;
    }
</style>
