@page
@model IndexModel
@using System.Text.Json

<div class="container mt-5">
    <h2 style="max-width: 480px; margin: 40px auto 0 auto; font-family: sans-serif; font-size: 24px; font-weight: 700; color: #1e1b4b; text-align: center; letter-spacing: -0.5px;">
    	Check ANAF Taxpayer
	</h2>

    <form method="post" style="max-width: 480px; margin: 40px auto; background: #f9f9f9; padding: 32px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1);">
    <div style="margin-bottom: 20px;">
        <label for="numericValue" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 14px;">
            Enter the Fiscal Identification Code (CIF)
        </label>
        <input type="number" asp-for="NumericValue" required
            style="width: 100%; padding: 10px 14px; border: 1px solid #ccc; border-radius: 8px; font-size: 15px; box-sizing: border-box; outline: none; transition: border 0.2s;"
            onfocus="this.style.borderColor='#4f46e5'" onblur="this.style.borderColor='#ccc'" />
    </div>
	<button type="submit"
        style="width: 100%; padding: 11px; background-color: #4f46e5; color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer;"
        onmouseover="this.style.backgroundColor='#4338ca'" onmouseout="this.style.backgroundColor='#4f46e5'">
        Fetch Data
		</button>
	</form>
    
    @if (Model.FoundData != null && Model.FoundData.Any())
    {
        <div style="max-width: 480px; margin: 24px auto; font-family: sans-serif;">
    		<h4 style="font-size: 15px; color: #6b7280; font-weight: 500; margin-bottom: 16px; text-align: center;">
        		Found @Model.FoundData.Count item(s)
    		</h4>

			@foreach (var item in Model.FoundData)
			{
					<div style="background: #f9f9f9; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); margin-bottom: 16px; overflow: hidden;">
						<div style="padding: 20px;">
							<table style="width: 100%; border-collapse: collapse; font-size: 14px;">
							@foreach (var property in item.EnumerateObject())
							{
									<tr style="border-bottom: 1px solid #ebebeb;">
										<td style="padding: 8px 12px 8px 0; color: #6b7280; font-weight: 600; white-space: nowrap; vertical-align: top; width: 35%;">
											@property.Name
										</td>
										<td style="padding: 8px 0; color: #1e1b4b; word-break: break-word; width: 65%;">
											@property.Value
										</td>
									</tr>
							}
							</table>
						</div>
					</div>
			}
		</div>
    }
    else if (Model.FoundData != null)
    {
        <div class="alert alert-info mt-4">
            No items found
        </div>
    }

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger mt-4">
            @Model.ErrorMessage
        </div>
    }
</div>

<style>
    .text-break {
        word-wrap: break-word;
        word-break: break-word;
        max-width: 600px;
    }
    
    .table-responsive {
        overflow-x: auto;
    }
</style>
